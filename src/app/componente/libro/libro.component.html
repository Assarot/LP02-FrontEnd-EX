<app-home></app-home>
<div
  style="justify-content: center; align-items: center; flex-direction: column"
>
  <button
    pButton
    pRipple
    type="button"
    icon="pi pi-plus"
    class="p-button-rounded p-button-success"
    (click)="showDialogCreate()"
    style="margin-bottom: 20px"
  ></button>

  <p-table [value]="libros">
    <ng-template pTemplate="header">
      <tr>
        <th>ID</th>
        <th>Título</th>
        <th>Páginas</th>
        <th>Edición</th>
        <th>Estado</th>
        <th>Acción</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-libro>
      <tr>
        <td>{{ libro.idlibro }}</td>
        <td>{{ libro.titulo }}</td>
        <td>{{ libro.paginas }}</td>
        <td>{{ libro.edicion }}</td>
        <td>{{ libro.estado }}</td>
        <td>
          <button
            pButton
            pRipple
            type="button"
            icon="pi pi-pencil"
            class="p-button-rounded"
            (click)="showDialogEdit(libro.id)"
          ></button>
          <button
            pButton
            pRipple
            type="button"
            icon="pi pi-trash"
            class="p-button-rounded p-button-danger"
            (click)="deleteLibro(libro.id)"
          ></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-dialog
  header="{{ titulo }}"
  [modal]="true"
  [(visible)]="visible"
  [style]="{ width: '25rem' }"
>
  <div class="flex align-items-center gap-3 mb-3">
    <label for="titulo" class="font-semibold w-6rem">Título:</label>
    <input
      pInputText
      [(ngModel)]="libro.titulo"
      name="titulo"
      id="titulo"
      class="flex-auto"
      autocomplete="off"
    />
  </div>
  <div class="flex align-items-center gap-3 mb-3">
    <label for="paginas" class="font-semibold w-6rem">Páginas:</label>
    <input
      pInputText
      [(ngModel)]="libro.paginas"
      name="paginas"
      id="paginas"
      class="flex-auto"
      autocomplete="off"
    />
  </div>
  <div class="flex align-items-center gap-3 mb-3">
    <label for="edicion" class="font-semibold w-6rem">Edición:</label>
    <input
      pInputText
      [(ngModel)]="libro.edicion"
      name="edicion"
      id="edicion"
      class="flex-auto"
      autocomplete="off"
    />
  </div>
  <div class="flex align-items-center gap-3 mb-3">
    <label for="estado" class="font-semibold w-6rem">Estado:</label>
    <input
      pInputText
      [(ngModel)]="libro.estado"
      name="estado"
      id="estado"
      class="flex-auto"
      autocomplete="off"
    />
  </div>
  <div class="flex align-items-center gap-3 mb-3">
    <label for="editorialId" class="font-semibold w-6rem">Editorial ID:</label>
    <input
      pInputText
      [(ngModel)]="libro.editorial_id"
      name="editorialId"
      id="editorialId"
      class="flex-auto"
      autocomplete="off"
    />
  </div>
  <div class="flex align-items-center gap-3 mb-3">
    <label for="seccionId" class="font-semibold w-6rem">Sección ID:</label>
    <input
      pInputText
      [(ngModel)]="libro.seccion_id"
      name="seccionId"
      id="seccionId"
      class="flex-auto"
      autocomplete="off"
    />
  </div>
  <div class="flex justify-content-end gap-2">
    <p-button label="Cancelar" severity="secondary" (click)="visible = false" />
    <p-button label="{{ accion }}" (click)="ejecutarAccion()" />
  </div>
</p-dialog>

<p-toast />
<p-confirmDialog />
